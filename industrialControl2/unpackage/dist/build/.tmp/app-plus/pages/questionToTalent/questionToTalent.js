(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/questionToTalent/questionToTalent"],{4900:function(e,t,o){"use strict";o.r(t);var n=o("fbac"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},7657:function(e,t,o){"use strict";(function(e){o("91f7"),o("921b");n(o("66fd"));var t=n(o("aed2"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},aed2:function(e,t,o){"use strict";o.r(t);var n=o("d788"),a=o("4900");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);var s=o("2877"),u=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=u.exports},d788:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},fbac:function(e,t,o){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("6b26"),i=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"6282"))},s={components:{uniPopup:i},data:function(){return{question:"",to_member_id:"",question_content:"",imgList:[],peopleDetail:{},checkedList:[],tagList:[],tags:"",moneyTab:0,moneyNum:5,totalMoeny:0,moneyList:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50}],videoSrc:""}},onLoad:function(t){var o=this;o.to_member_id=24,e.getStorage({key:"access_token",success:function(e){o.access_token=e.data}}),e.getStorage({key:"member_id",success:function(e){o.member_id=e.data}}),console.log(n(o.access_token," at pages\\questionToTalent\\questionToTalent.vue:145")),console.log(n(o.member_id," at pages\\questionToTalent\\questionToTalent.vue:146")),o.getPeopleDetail(),o.getMoney()},methods:{getPeopleDetail:function(){var e=this;(0,a.people_infos)({member_id:this.member_id,access_token:this.access_token,to_member_id:e.to_member_id}).then(function(t){console.log(n(t," at pages\\questionToTalent\\questionToTalent.vue:159")),1==t.data.code&&(e.peopleDetail=t.data.data)})},getMoney:function(){var e=this;(0,a.home_info)({member_id:e.member_id,access_token:e.access_token}).then(function(t){console.log(n(t," at pages\\questionToTalent\\questionToTalent.vue:172")),1==t.data.code&&(e.totalMoeny=t.data.data.balance)})},focusPeople:function(t){var o=this;(0,a.user_add_follow)({member_id:o.member_id,access_token:o.access_token,to_member_id:o.to_member_id}).then(function(a){var i;console.log(n(a," at pages\\questionToTalent\\questionToTalent.vue:186")),1==a.data.code?(1==t?i="关注达人成功!":2==t&&(i="取消成功!"),e.showToast({title:i,duration:2e3,icon:"none"}),o.getPeopleDetail()):e.showToast({title:a.data.msg,duration:2e3,icon:"none"})})},selectMoney:function(e){this.moneyTab=e,this.moneyNum=this.moneyList[e].value},inputMoney:function(){this.moneyTab=-1},openPopup:function(){console.log(n("ffffff"," at pages\\questionToTalent\\questionToTalent.vue:220")),console.log(n(this.$refs.popup," at pages\\questionToTalent\\questionToTalent.vue:221")),this.$refs.popup.open(),this.getTags()},closePopup:function(){this.$refs.popup.close()},getTags:function(){var e=this;(0,a.get_tags)({member_id:this.member_id,access_token:this.access_token}).then(function(t){console.log(n(t," at pages\\questionToTalent\\questionToTalent.vue:236")),1==t.data.code&&(e.tagList=t.data.data.list,console.log(n(e.tagList," at pages\\questionToTalent\\questionToTalent.vue:239")),e.tagList.forEach(function(e,t){e.child.forEach(function(e,t){e.is_checked=0})}))})},checkTag:function(e,t){var o=this;o.tagList[e].child[t].is_checked=1},cancelTag:function(e,t){var o=this;o.tagList[e].child[t].is_checked=0},sure_tag:function(){var e=this;e.checkedList=[],e.tagList.forEach(function(t,o){t.child.forEach(function(t,o){1==t.is_checked&&(e.tags+=t.id+",",e.checkedList.push(t.tag_title))})}),e.tags=e.tags.substr(0,e.tags.length-1),e.$refs.popup.close()},reset_tag:function(){var e=this;e.checkedList=[],e.tagList.forEach(function(e,t){e.child.forEach(function(e,t){e.is_checked=0})})},uploadImg:function(){var t=this;e.chooseImage({count:3,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){console.log(n(e," at pages\\questionToTalent\\questionToTalent.vue:293")),0!=t.imgList.length?t.imgList=t.imgList.concat(e.tempFilePaths):t.imgList=e.tempFilePaths,console.log(n(t.imgList," at pages\\questionToTalent\\questionToTalent.vue:299"))}})},uploadVideo:function(){var t=this;e.chooseVideo({count:1,sourceType:["camera","album"],success:function(e){console.log(n(e," at pages\\questionToTalent\\questionToTalent.vue:331")),t.videoSrc=e.tempFilePath}})},submitBtn:function(){var t=this;(0,a.question_add)({member_id:t.member_id,access_token:t.access_token,to_member_id:t.to_member_id,title:t.question,content:t.question_content,price:t.moneyNum,tag_id:t.tags}).then(function(o){console.log(n(o," at pages\\questionToTalent\\questionToTalent.vue:348")),console.log(n(o.data.data," at pages\\questionToTalent\\questionToTalent.vue:349"));var a=o.data.data;if(t.imgList.length>0){var i=t.imgList.map(function(e,t){return{name:"image"+t,uri:e}});console.log(n(i," at pages\\questionToTalent\\questionToTalent.vue:359")),e.uploadFile({url:"http://test.api.lanchonggk.com/industry/api/add_pics",fileType:"image",files:i,filePath:o.tempFilePaths[0],name:"pic[]",formData:{post_id:a,type:"1"},success:function(o){console.log(n(o," at pages\\questionToTalent\\questionToTalent.vue:371")),200==o.statusCode&&(t.videoSrc?e.uploadFile({url:"http://test.api.lanchonggk.com/industry/api/add_video",filePath:t.videoSrc,fileType:"video",name:"video",formData:{post_id:a,type:"1"},success:function(t){console.log(n(t," at pages\\questionToTalent\\questionToTalent.vue:385")),200==t.statusCode&&(e.showToast({title:"问题发布成功!",duration:2e3,icon:"none"}),e.navigateTo({url:"../questionDetail/questionDetail?id="+a}))}}):(e.showToast({title:"问题发布成功!",duration:2e3,icon:"none"}),e.navigateTo({url:"../questionDetail/questionDetail?id="+a})))},fail:function(e){console.log(n(e," at pages\\questionToTalent\\questionToTalent.vue:414"))}})}})}}};t.default=s}).call(this,o("6e42")["default"],o("0de9")["default"])}},[["7657","common/runtime","common/vendor"]]]);