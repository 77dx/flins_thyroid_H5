(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/question/question"],{"0f88":function(e,t,n){"use strict";n.r(t);var o=n("1859"),i=n("46f2");for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n("2877"),u=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);t["default"]=u.exports},"11c0":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("6b26"),s=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"6282"))},a=function(){return n.e("components/uni-tag/uni-tag").then(n.bind(null,"8dc0"))},u={components:{uniPopup:s,uniTag:a},data:function(){return{access_token:"",member_id:"",tagList:[],question:"",question_content:"",imgList:[],checkedList:[],tags:"",moneyList:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50}],moneyTab:0,moneyNum:5,videoSrc:"",totalMoeny:0,iscanPublish:!0}},onLoad:function(){var t=this;e.getStorage({key:"access_token",success:function(e){t.access_token=e.data}}),e.getStorage({key:"member_id",success:function(e){t.member_id=e.data}}),console.log(o(t.access_token," at pages\\question\\question.vue:132")),console.log(o(t.member_id," at pages\\question\\question.vue:133")),t.access_token&&t.member_id&&t.getMoney()},methods:{openPopup:function(){this.$refs.popup.open(),this.getTags()},closePopup:function(){this.$refs.popup.close()},selectMoney:function(e){this.moneyTab=e,this.moneyNum=this.moneyList[e].value},inputMoney:function(){this.moneyTab=-1},getMoney:function(){var e=this;(0,i.home_info)({member_id:e.member_id,access_token:e.access_token}).then(function(t){console.log(o(t," at pages\\question\\question.vue:164")),1==t.data.code&&(e.totalMoeny=t.data.data.balance)})},getTags:function(){var e=this;(0,i.get_tags)({member_id:this.member_id,access_token:this.access_token}).then(function(t){console.log(o(t," at pages\\question\\question.vue:177")),1==t.data.code&&(e.tagList=t.data.data.list,console.log(o(e.tagList," at pages\\question\\question.vue:180")),e.tagList.forEach(function(e,t){e.child.forEach(function(e,t){e.is_checked=0})}))})},checkTag:function(e,t){var n=this;n.tagList[e].child[t].is_checked=1},cancelTag:function(e,t){var n=this;n.tagList[e].child[t].is_checked=0},sure_tag:function(){var e=this;e.checkedList=[],e.tagList.forEach(function(t,n){t.child.forEach(function(t,n){1==t.is_checked&&(e.tags+=t.id+",",e.checkedList.push(t.tag_title))})}),e.tags=e.tags.substr(0,e.tags.length-1),e.$refs.popup.close()},reset_tag:function(){var e=this;e.checkedList=[],e.tagList.forEach(function(e,t){e.child.forEach(function(e,t){e.is_checked=0})})},uploadImg:function(){var t=this;e.chooseImage({count:3,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){console.log(o(e," at pages\\question\\question.vue:234")),0!=t.imgList.length?t.imgList=t.imgList.concat(e.tempFilePaths):t.imgList=e.tempFilePaths,console.log(o(t.imgList," at pages\\question\\question.vue:240"))}})},uploadVideo:function(){var t=this;e.chooseVideo({count:1,sourceType:["camera","album"],success:function(e){console.log(o(e," at pages\\question\\question.vue:251")),t.videoSrc=e.tempFilePath}})},submitBtn:function(){var t=this;t.iscanPublish=!1,(0,i.question_add)({member_id:t.member_id,access_token:t.access_token,to_member_id:"",title:t.question,content:t.question_content,price:t.moneyNum,tag_id:t.tags}).then(function(n){console.log(o(n," at pages\\question\\question.vue:269")),console.log(o(n.data.data," at pages\\question\\question.vue:270"));var i=n.data.data;if(0==t.imgList.length&&""==t.videoSrc&&(console.log(o("没有视频和图片"," at pages\\question\\question.vue:274")),e.showToast({title:"发布成功!",duration:2e3,icon:"none"}),e.navigateTo({url:"../questionDetail/questionDetail?id="+i})),t.imgList.length>0){var s=t.imgList.map(function(e,t){return{name:"image"+t,uri:e}});console.log(o(s," at pages\\question\\question.vue:293")),e.uploadFile({url:"http://test.api.lanchonggk.com/industry/api/add_pics",fileType:"image",files:s,formData:{post_id:i,type:"1"},success:function(n){console.log(o(n," at pages\\question\\question.vue:303")),200==n.statusCode&&(t.videoSrc?e.uploadFile({url:"http://test.api.lanchonggk.com/industry/api/add_video",filePath:t.videoSrc,fileType:"video",name:"video",formData:{post_id:i,type:"1"},success:function(t){console.log(o(t," at pages\\question\\question.vue:317")),200==t.statusCode&&(e.showToast({title:"问题发布成功!",duration:2e3,icon:"none"}),e.navigateTo({url:"../questionDetail/questionDetail?id="+i}))}}):(e.showToast({title:"问题发布成功!",duration:2e3,icon:"none"}),e.navigateTo({url:"../questionDetail/questionDetail?id="+i})))},fail:function(e){console.log(o(e," at pages\\question\\question.vue:346"))}})}})}}};t.default=u}).call(this,n("6e42")["default"],n("0de9")["default"])},1859:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i})},"46f2":function(e,t,n){"use strict";n.r(t);var o=n("11c0"),i=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);t["default"]=i.a},"4ecc":function(e,t,n){"use strict";(function(e){n("91f7"),n("921b");o(n("66fd"));var t=o(n("0f88"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])}},[["4ecc","common/runtime","common/vendor"]]]);